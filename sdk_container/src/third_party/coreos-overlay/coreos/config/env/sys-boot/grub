# Gentoo's patches conflict with Red Hat's patches, and none of Gentoo's patches
# affect Flatcar, so skip them all.
PATCHES=()

# Replace Gentoo's SBAT with Flatcar's.
cros_post_src_install_sbat() {
	insinto /usr/share/grub
	newins - sbat.csv <<-EOF
		sbat,1,SBAT Version,sbat,1,https://github.com/rhboot/shim/blob/main/SBAT.md
		grub,4,Free Software Foundation,grub,${PV},https://www.gnu.org/software/grub/
		grub.flatcar,1,Flatcar,grub2,${PVR},https://github.com/flatcar/Flatcar
	EOF
}

# Flatcar does not use grub-install or grub-mkconfig. All the files under /etc
# relate to grub-mkconfig.
INSTALL_MASK+=" ${EPREFIX}/etc/ *grub-install* *mkconfig*"
PKG_INSTALL_MASK+=" ${EPREFIX}/etc/ *grub-install* *mkconfig*"
